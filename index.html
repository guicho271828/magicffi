<html><head><link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Comfortaa|Raleway|Ubuntu' /><link rel='stylesheet' type='text/css' href='default.css' /><script type='text/javascript' src='default.js'></script><title>magicffi</title></head><body><div class="page-header"><div class="title"><h1>magicffi</h1></div><div class="table-of-contents"><h1>Index</h1><ol><li><a href="#" data-node=""><span class="directory"></span></a><ol><li><a href="#README.md" data-node="README.md"><span class="file">README</span><span class="extension">md</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/README.md">[edit on web]</a></a></li></ol></li><li><a href="#tests" data-node="tests"><span class="directory">tests</span></a><ol><li><a href="#tests/README" data-node="tests/README"><span class="file">README</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/tests/README">[edit on web]</a></a></li></ol></li><li><a href="#" data-node=""><span class="directory"></span></a><ol><li><a href="#magicffi.asd" data-node="magicffi.asd"><span class="file">magicffi</span><span class="extension">asd</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/magicffi.asd">[edit on web]</a></a></li></ol></li><li><a href="#src" data-node="src"><span class="directory">src</span></a><ol><li><a href="#src/package.lisp" data-node="src/package.lisp"><span class="file">package</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/package.lisp">[edit on web]</a></a></li></ol></li><li><a href="#src" data-node="src"><span class="directory">src</span></a><ol><li><a href="#src/grovel.processed-grovel-file" data-node="src/grovel.processed-grovel-file"><span class="file">grovel</span><span class="extension">processed-grovel-file</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/grovel.processed-grovel-file">[edit on web]</a></a></li></ol></li><li><a href="#src" data-node="src"><span class="directory">src</span></a><ol><li><a href="#src/types.lisp" data-node="src/types.lisp"><span class="file">types</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/types.lisp">[edit on web]</a></a></li><li><a href="#src/api.lisp" data-node="src/api.lisp"><span class="file">api</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/api.lisp">[edit on web]</a></a></li><li><a href="#src/shortcuts.lisp" data-node="src/shortcuts.lisp"><span class="file">shortcuts</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/shortcuts.lisp">[edit on web]</a></a></li></ol></li></ol></div></div><div class="main"><h1 id=""><span class="directory"></span></h1><h2 id="README.md"><span class="file">README</span><span class="extension">md</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/README.md">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><div class="static-file"><div class="docstring"><h1 id="magicffi-build-status">MAGICFFI <a href="https://travis-ci.org/guicho271828/magicffi"><img src="https://travis-ci.org/guicho271828/magicffi.svg?branch=master" alt="Build Status" /></a></h1>
<p>MAGICFFI is a CFFI interface to libmagic(3), the file type determination library using ``magic’’ numbers.</p>
<h2 id="download">Download</h2>
<p>To check out the git repository, run:</p>
<pre><code>$ git clone git://github.com/guicho271828/magicffi.git</code></pre>
<h2 id="installation">Installation</h2>
<p>MAGICFFI depends on the following lisp libraries:</p>
<ul>
<li>CFFI</li>
<li>CL-PPCRE (used by the internal flags generator)</li>
</ul>
<p>The following system packages are also required:</p>
<ul>
<li>libmagic-dev</li>
<li>libc6-dev</li>
<li>gcc</li>
</ul>
<p>You have to install them on your system before loading magicffi.</p>
<h2 id="tutorial">Tutorial</h2>
<pre class="common-lisp"><code>&gt; (asdf:load-system :magicffi)
&gt; (use-package :magicffi)
&gt; (with-open-magic (magic &#39;(:mime-type :symlink))
    (magic-file magic #P&quot;magicffi.asd&quot;))
&quot;text/plain&quot;</code></pre>
<h2 id="documentation">Documentation</h2>
<p>All external symbols of the package <code>MAGICFFI</code> are listed in <code>package.lisp</code>. Check out their docstrings for help.</p>
<h2 id="magic-flags">Magic Flags</h2>
<p>You can use either constants or keyword list as magic flags. I.e.,</p>
<pre class="common-lisp"><code>(magic-open (logxor +magic-mime-type+ +magic-symlink+))</code></pre>
<p>is equivalent to</p>
<pre class="common-lisp"><code>(magic-open &#39;(:mime-type :symlink))</code></pre>
<p>The constant name and keyword name of a flag are based on its C name. See the following table for the pattern:</p>
<table>
<thead>
<tr class="header">
<th>C name</th>
<th>Lisp constant</th>
<th>Lisp keyword</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>MAGIC_NONE</code></td>
<td><code>+MAGIC-NONE+</code></td>
<td><code>:NONE</code></td>
</tr>
</tbody>
</table>
<p>All constant names are exported.</p>
<h2 id="credit">Credit</h2>
<ul>
<li>Desmond O. Chang (original author)</li>
<li>Peter Hillerström</li>
<li>Pocket7878</li>
<li>Masataro Asai</li>
</ul>
</div></div></div></div><h1 id="tests"><span class="directory">tests</span></h1><h2 id="tests/README"><span class="file">README</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/tests/README">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><div class="static-file"><div class="docstring"><p>The testfiles come from the original libmagic source code. The file <code>libmagic-COPYING</code> is the license file of libmagic.</p>
</div></div></div></div><h1 id=""><span class="directory"></span></h1><h2 id="magicffi.asd"><span class="file">magicffi</span><span class="extension">asd</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/magicffi.asd">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="defmethod-perform"><div class="pkg-ASDF/ACTION EXTERNAL"><div class="span"><span class="doctype">defmethod</span></div><div class="span"><span class="name" id="ASDF/ACTION:PERFORM">perform</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><h1 id="src"><span class="directory">src</span></h1><h2 id="src/package.lisp"><span class="file">package</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/package.lisp">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="defpackage-magicffi"><div class="pkg-KEYWORD EXTERNAL"><div class="span"><span class="doctype">defpackage</span></div><div class="span"><span class="name" id="KEYWORD:MAGICFFI">magicffi</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><h1 id="src"><span class="directory">src</span></h1><h2 id="src/grovel.processed-grovel-file"><span class="file">grovel</span><span class="extension">processed-grovel-file</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/grovel.processed-grovel-file">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-none+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NONE+">+magic-none+</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-debug+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-DEBUG+">+magic-debug+</span></div></div></h3><div class="docstring"><p>Turn on debugging</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-symlink+-+magic-compress+-magicffi"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-SYMLINK+">+magic-symlink+</span><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-COMPRESS+">+magic-compress+</span></div><span class="package">magicffi</span></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-devices+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-DEVICES+">+magic-devices+</span></div></div></h3><div class="docstring"><p>Look at the contents of devices</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-mime-type+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-MIME-TYPE+">+magic-mime-type+</span></div></div></h3><div class="docstring"><p>Return the MIME type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-mime-encoding+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-MIME-ENCODING+">+magic-mime-encoding+</span></div></div></h3><div class="docstring"><p>Return the MIME encoding</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-mime+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-MIME+">+magic-mime+</span></div></div></h3><div class="docstring"><p>A shorthand for MAGIC_MIME_TYPE | MAGIC_MIME_ENCODING</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-continue+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-CONTINUE+">+magic-continue+</span></div></div></h3><div class="docstring"><p>Return all matches</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-check+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-CHECK+">+magic-check+</span></div></div></h3><div class="docstring"><p>Print warnings to stderr</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-preserve-atime+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-PRESERVE-ATIME+">+magic-preserve-atime+</span></div></div></h3><div class="docstring"><p>Restore access time on exit</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-raw+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-RAW+">+magic-raw+</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-error+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-ERROR+">+magic-error+</span></div></div></h3><div class="docstring"><p>Handle ENOENT etc as real errors</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-apple+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-APPLE+">+magic-apple+</span></div></div></h3><div class="docstring"><p>Return the Apple creator/type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-apptype+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-APPTYPE+">+magic-no-check-apptype+</span></div></div></h3><div class="docstring"><p>Don't check application type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-cdf+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-CDF+">+magic-no-check-cdf+</span></div></div></h3><div class="docstring"><p>Don't check for cdf files</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-compress+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-COMPRESS+">+magic-no-check-compress+</span></div></div></h3><div class="docstring"><p>Don't check for compressed files</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-elf+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-ELF+">+magic-no-check-elf+</span></div></div></h3><div class="docstring"><p>Don't check for elf details</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-encoding+-+magic-no-check-soft+-magicffi"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-NO-CHECK-ENCODING+">+magic-no-check-encoding+</span><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-NO-CHECK-SOFT+">+magic-no-check-soft+</span></div><span class="package">magicffi</span></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-tar+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-TAR+">+magic-no-check-tar+</span></div></div></h3><div class="docstring"><p>Don't check for tar files</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-text+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-TEXT+">+magic-no-check-text+</span></div></div></h3><div class="docstring"><p>Don't check for text files</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-tokens+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-TOKENS+">+magic-no-check-tokens+</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-ascii+"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name" id="MAGICFFI:+MAGIC-NO-CHECK-ASCII+">+magic-no-check-ascii+</span></div></div></h3><div class="docstring"><p>Defined for backwards compatibility (renamed): same as MAGIC_NO_CHECK_TEXT</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defconstant-+magic-no-check-fortran+-+magic-no-check-troff+-magicffi"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defconstant</span></div><div class="span"><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-NO-CHECK-FORTRAN+">+magic-no-check-fortran+</span><span class="name EXTERNAL" id="MAGICFFI:+MAGIC-NO-CHECK-TROFF+">+magic-no-check-troff+</span></div><span class="package">magicffi</span></div></h3><div class="docstring"><p>Defined for backwards compatibility; do nothing</p>
</div></div></div><h1 id="src"><span class="directory">src</span></h1><h2 id="src/types.lisp"><span class="file">types</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/types.lisp">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="define-condition-magic-error"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">define-condition</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-ERROR">magic-error</span></div></div></h3><div class="docstring"><p>Consists of errors that are related to MAGICFFI. Use the function MAGIC-ERROR to signal it. The error number and error string are accessed by the functions MAGIC-ERROR-ERRNO and MAGIC-ERROR-ERROR.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defclass-magic"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defclass</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC">magic</span></div></div></h3><div class="docstring missing">(documentation missing)</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magicp-object"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGICP">magicp</span></div><span class="args lisp">object</span></div></h3><div class="docstring"><p>Returns 'true' if object is of type MAGIC; otherwise, returns 'false'. It is unaffected by whether object, if it is a magic, is open or closed.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-open-magic-p-magic"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:OPEN-MAGIC-P">open-magic-p</span></div><span class="args lisp">magic</span></div></h3><div class="docstring"><p>Returns 'true' if MAGIC is open; otherwise, returns 'false'.</p>
</div></div></div><h2 id="src/api.lisp"><span class="file">api</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/api.lisp">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="defun-magic-error-magic"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-ERROR">magic-error</span></div><span class="args lisp">magic</span></div></h3><div class="docstring"><p>Signals an error of type MAGIC-ERROR.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-open-flags"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-OPEN">magic-open</span></div><span class="args lisp">flags</span></div></h3><div class="docstring"><p>Creates a magic cookie and returns it. An error of type SIMPLE-ERROR is signaled on failure. FLAGS specifies how the other magic functions should behave. See README for the flags usage.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-close-magic"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-CLOSE">magic-close</span></div><span class="args lisp">magic</span></div></h3><div class="docstring"><p>Closes the magic database and deallocates any resources used. It is permissible to close an already closed magic, and has no effect. Returns 'true' if an open magic cookie has been closed, or 'false' if the magic cookie is already closed.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-file-magic-pathspec"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-FILE">magic-file</span></div><span class="args lisp">magic pathspec</span></div></h3><div class="docstring"><p>Returns a textual description of the contents of the PATHSPEC argument. PATHSPEC is a pathname designator. An error of type MAGIC-ERROR is signaled on failure.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-buffer-magic-string"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-BUFFER">magic-buffer</span></div><span class="args lisp">magic string</span></div></h3><div class="docstring"><p>Returns a textual description of the contents of the STRING argument. An error of type MAGIC-ERROR is signaled on failure.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-setflags-magic-flags"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-SETFLAGS">magic-setflags</span></div><span class="args lisp">magic flags</span></div></h3><div class="docstring"><p>Sets the magic flags. Signals an error of type SIMPLE-ERROR on systems that don't support utime(2), or utimes(2) when :PRESERVE-ATIME is set; otherwise, returns 'true'.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defvar-*magic-database*"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defvar</span></div><div class="span"><span class="name" id="MAGICFFI:*MAGIC-DATABASE*">*magic-database*</span></div></div></h3><div class="docstring"><p>Default magic database files. It can be NIL(default), or a designator for a non-empty list of pathname designators. NIL means the default database files defined by libmagic.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-check-magic-&optional-pathname-list"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-CHECK">magic-check</span></div><span class="args lisp">magic &amp;optional pathname-list</span></div></h3><div class="docstring"><p>Checks the validity of database files. PATHNAME-LIST is NIL(default), which means use <em>MAGIC-DATABASE</em>, or a designator for a non-empty list of pathname designators. Returns 'true' on success and signals an error of type MAGIC-ERROR on failure.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-compile-magic-&optional-pathname-list"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-COMPILE">magic-compile</span></div><span class="args lisp">magic &amp;optional pathname-list</span></div></h3><div class="docstring"><p>Compiles database files. PATHNAME-LIST is NIL(default), which means use <em>MAGIC-DATABASE</em>, or a designator for a non-empty list of pathname designators. Returns 'true' on success and signals an error of type MAGIC-ERROR on failure. The compiled files created are named from the basename(1) of each file argument with `.mgc' appended to it.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-magic-load-magic-&optional-pathname-list"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:MAGIC-LOAD">magic-load</span></div><span class="args lisp">magic &amp;optional pathname-list</span></div></h3><div class="docstring"><p>Loads database files. PATHNAME-LIST is NIL(default), which means use <em>MAGIC-DATABASE</em>, or a designator for a non-empty list of pathname designators. Returns 'true' on success and signals an error of type MAGIC-ERROR on failure.</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defmacro-with-open-magic-(magic-&optional-(flags-''(none))-(magicfiles-nil))-&body-body"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defmacro</span></div><div class="span"><span class="name" id="MAGICFFI:WITH-OPEN-MAGIC">with-open-magic</span></div><span class="args lisp">(magic &amp;optional (flags ''(none)) (magicfiles nil)) &amp;body body</span></div></h3><div class="docstring"><p>Opens the magic cookie MAGIC, executes BODY and close MAGIC.</p>
<p>FLAGS: A list of keywords (see types), defaulted to (:none).</p>
<p>MAGICFILES: NIL, or a list of pathname designators for the database files. Defaulted to NIL, which uses the default database available in the system. This covers the most usage.</p>
</div></div></div><h2 id="src/shortcuts.lisp"><span class="file">shortcuts</span><span class="extension">lisp</span><a class="source-link" href="https://github.com/guicho271828/magicffi/tree/master/src/shortcuts.lisp">[edit on web]</a></h2><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-file-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-FILE">pathname-file</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Returns a description, as in unix <code>file</code> command</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-mime-type-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-MIME-TYPE">pathname-mime-type</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Return the MIME type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-mime-encoding-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-MIME-ENCODING">pathname-mime-encoding</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Return the MIME encoding</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-mime-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-MIME">pathname-mime</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Return the MIME type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-apple-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-APPLE">pathname-apple</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Return the Apple creator/type</p>
</div></div></div><div class="doc-entry"><div class="entry"><h3 id="defun-pathname-extension-file-&rest-flags-&key-debug-symlink-compress-devices-continue-check-preserve-atime-raw-error-compress-transp-no-check-compress-no-check-tar-no-check-soft-no-check-apptype-no-check-elf-no-check-text-no-check-cdf-no-check-tokens-no-check-encoding"><div class="pkg-MAGICFFI EXTERNAL"><div class="span"><span class="doctype">defun</span></div><div class="span"><span class="name" id="MAGICFFI:PATHNAME-EXTENSION">pathname-extension</span></div><span class="args lisp">file &amp;rest flags &amp;key debug symlink compress devices continue check preserve-atime raw error compress-transp no-check-compress no-check-tar no-check-soft no-check-apptype no-check-elf no-check-text no-check-cdf no-check-tokens no-check-encoding</span></div></h3><div class="docstring"><p>Return a /-separated list of extensions. This is NOT about the file name extensions (such as .png).</p>
</div></div></div></div><div class="footer"></div></body></html>
